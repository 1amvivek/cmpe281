<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <title>4.4.1.1. Presence priority</title>
      <link rel="stylesheet" href="css/jbossorg.css" type="text/css"/>
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/>
      <link rel="start" href="index.html" title="JBoss AOP - Aspect-Oriented Framework for Java"/>
      <link rel="up" href="adv-overlannotparam.html" title="4.4.1. Annotated-parameter Signature"/>
      <link rel="prev" href="adv-overlannotparam.html" title="4.4.1. Annotated-parameter Signature"/>
      <link rel="next" href="adv-overlannotparamdegree.html" title="4.4.1.2. Assignability Degree"/>
   </head>
   <body>
      <p id="title">
         <a href="http://www.jboss.org" class="jbossOrg_href">
            <strong>
						        JBoss.org	
						</strong>
         </a>
         <a href="http://labs.jboss.com/projects/docs" class="commDoc_href">
            <strong>
						        Community Documentation	
						</strong>
         </a>
      </p>
      <ul class="docnav">
         <li class="previous">
            <a accesskey="p" href="adv-overlannotparam.html">
               <strong>Prev</strong>
            </a>
         </li>
         <li class="next">
            <a accesskey="n" href="adv-overlannotparamdegree.html">
               <strong>Next</strong>
            </a>
         </li>
      </ul>
      <div class="sect3" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h4 class="title">
                     <a id="adv-overlannotparampresence"/>4.4.1.1. Presence priority</h4>
               </div>
            </div>
         </div>
         <p>
               This rule is quite simple, it means that an advice that receives only a joinpoint bean
               <code class="literal">(@JoinPoint)</code> as its parameter will have a higher priority than another advice
               that receives all other annotated parameters available (notice we are following the
               <a href="adv-overlannotparam.html#annotparampriority">annotation priority order</a> just described).
            </p>
         <p>
               In other words, the first <code class="literal">OneAspect.after()</code> advice method will be chosen when
               calling <code class="literal">POJO.someMethod()</code> in this example:
            </p>
         <pre class="programlisting">public class POJO
{
   String someMethod(String s){}
}

&lt;aop&gt;
   &lt;aspect class="OneAspect"/&gt;
   &lt;bind pointcut="execution(* POJO-&gt;someMethod(..))"&gt;
      &lt;after aspect="OneAspect" name="after"/&gt;
   &lt;/bind&gt;
&lt;/aop&gt;


public class OneAspect
{
   public void after(@JoinPoint MethodJoinPoint mjp){} //1
   public String after(@Target POJO pojo, @Return String ret, @Arg String arg0){} //2
}</pre>
         <p>
               Again in the following example, the first <code class="literal">OneAspect.after()</code> advice method
               will be chosen when calling <code class="literal">POJO.someMethod()</code>. The first <code class="literal">after()</code>
               advice method’s highest priority parameter is <code class="literal">@Target</code>, the second advice parameter’s
               highest priority parameter is <code class="literal">@Return</code>, and <code class="literal">@Target</code> has a higher
               priority than <code class="literal">@Return</code>:
            </p>
         <pre class="programlisting">public class POJO
{
   String someMethod(String s){}
}

&lt;aop&gt;
   &lt;aspect class="OneAspect"/&gt;
   &lt;bind pointcut="execution(* POJO-&gt;someMethod(..))"&gt;
      &lt;after aspect="OneAspect" name="after"/&gt;
   &lt;/bind&gt;
&lt;/aop&gt;


public class OneAspect
{
   public void after(@Target POJO pojo){} //1
   public String after(@Return String ret, @Arg String arg0){} //2
}</pre>
         <p>
               In cases where the highest priority annotated parameter of two advice methods is
               the same, we move on to the next highest priority annotated parameter of both advices.
               In the following scenario, both <code class="literal">OneAspect.after()</code> methods have the
               <code class="literal">@JoinPoint</code> parameter as the highest priority parameter. The first one
               has a <code class="literal">@Target</code> as its second-highest priority parameter while the second
               one has <code class="literal">@Return</code> as its second-highest priority parameter. Since
               <code class="literal">@Target</code> has a higher priority than <code class="literal">@Return</code>, the first
               <code class="literal">OneAspect.after()</code> is chosen for <code class="literal">POJO.someMethod()</code>.
            </p>
         <pre class="programlisting">public class POJO
{
   String someMethod(String s){}
}

&lt;aop&gt;
   &lt;aspect class="OneAspect"/&gt;
   &lt;bind pointcut="execution(* POJO-&gt;someMethod(..))"&gt;
      &lt;after aspect="OneAspect" name="after"/&gt;
   &lt;/bind&gt;
&lt;/aop&gt;


public class OneAspect
{
   public void after(@JoinPoint MethodJoinPoint mjp, @Target POJO pojo){} //1
   public String after(@JoinPoint MethodJoinPoint mjp, @Return String ret){} //2
}</pre>
         <p>
               In the next example, the first <code class="literal">OneAspect.before()</code> advice is chosen
               over the second one when calling <code class="literal">POJO.someMethod()</code>. The reason is that,
               all else being equal, the first one matches more parameters:.
            </p>
         <pre class="programlisting">public class POJO
{
   String someMethod(String s, int i){}
}

&lt;aop&gt;
   &lt;aspect class="OneAspect"/&gt;
   &lt;bind pointcut="execution(* POJO-&gt;someMethod(..))"&gt;
      &lt;before aspect="OneAspect" name="before"/&gt;
   &lt;/bind&gt;
&lt;/aop&gt;


public class OneAspect
{
   public void before(@Arg String s, @Arg int i){} //1
   public String before(@Arg String s){} //2
}</pre>
         <p>
               If the priority of annotated parameters using the presence criterion is the same
               on more than one advice, the next criterion, the assignability degree, is used.
            </p>
      </div>
      <ul class="docnav">
         <li class="previous">
            <a accesskey="p" href="adv-overlannotparam.html">
               <strong>Prev</strong>4.4.1. Annotated-parameter Signature</a>
         </li>
         <li class="up">
            <a accesskey="u" href="#">
               <strong>Top of page</strong>
            </a>
         </li>
         <li class="home">
            <a accesskey="h" href="index.html">
               <strong>Front page</strong>
            </a>
         </li>
         <li class="next">
            <a accesskey="n" href="adv-overlannotparamdegree.html">
               <strong>Next</strong>4.4.1.2. Assignability Degree</a>
         </li>
      </ul>
   </body>
</html>