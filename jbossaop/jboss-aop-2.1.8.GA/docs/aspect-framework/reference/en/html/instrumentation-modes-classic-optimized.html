<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <title>14.1.2. Optimized</title>
      <link rel="stylesheet" href="css/jbossorg.css" type="text/css"/>
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/>
      <link rel="start" href="index.html" title="JBoss AOP - Aspect-Oriented Framework for Java"/>
      <link rel="up" href="instrumention-modes-classic.html" title="14.1. Classic Weaving"/>
      <link rel="prev" href="instrumentation-modes-classic-not-optimized.html" title="14.1.1. Non-optimized"/>
      <link rel="next" href="instrumention-modes-generated-advisor.html" title="14.2. Generated Advisor Weaving"/>
   </head>
   <body>
      <p id="title">
         <a href="http://www.jboss.org" class="jbossOrg_href">
            <strong>
						        JBoss.org	
						</strong>
         </a>
         <a href="http://labs.jboss.com/projects/docs" class="commDoc_href">
            <strong>
						        Community Documentation	
						</strong>
         </a>
      </p>
      <ul class="docnav">
         <li class="previous">
            <a accesskey="p" href="instrumentation-modes-classic-not-optimized.html">
               <strong>Prev</strong>
            </a>
         </li>
         <li class="next">
            <a accesskey="n" href="instrumention-modes-generated-advisor.html">
               <strong>Next</strong>
            </a>
         </li>
      </ul>
      <div class="sect2" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h3 class="title">
                     <a id="instrumentation-modes-classic-optimized"/>14.1.2. Optimized</h3>
               </div>
            </div>
         </div>
         <p>
            This is a development of the original weaving mode. Like the non-optimized flavour, it 
            modifies the target joinpoints, but in addition it generates an invocation class per woven
            joinpoint, which calls the target joinpoint normally, avoiding the cost of calling via 
            reflection. 
         </p>
         <p>
            To use optimized classic weaving at compile-time, you need to specify the following 
            parameters to the <code class="literal">aopc</code> ant task.
         </p>
         <div class="itemizedlist">
            <ul>
               <li>
                  <code class="literal">optimized</code> - true</li>
               <li>
                  <code class="literal">jboss.aop.instrumentor</code> - org.jboss.aop.instrument.ClassicInstrumentor</li>
            </ul>
         </div>
         <p>
            An example is shown in the following build.xml snippet. Only the relevant parts are shown.
         </p>
         <pre class="programlisting">
   &lt;aopc optimized="true" compilerclasspathref="..."&gt;
      &lt;sysproperty key="jboss.aop.instrumentor" \
         value="org.jboss.aop.instrument.ClassicInstrumentor"/&gt;
      ...
   &lt;/aopc&gt;
                  
         </pre>
         <p>
            To turn this weaving mode on when using load-time weaving, you need to specify the same flags
            as system properties when running your woven application. Here is an example:
         </p>
         <pre class="programlisting">
   java -Djboss.aop.optimized=true \
      -Djboss.aop.instrumentor=org.jboss.aop.instrument.ClassicInstrumentor \
      [other aop and classpath settings] MyClass
         </pre>
      </div>
      <ul class="docnav">
         <li class="previous">
            <a accesskey="p" href="instrumentation-modes-classic-not-optimized.html">
               <strong>Prev</strong>14.1.1. Non-optimized</a>
         </li>
         <li class="up">
            <a accesskey="u" href="#">
               <strong>Top of page</strong>
            </a>
         </li>
         <li class="home">
            <a accesskey="h" href="index.html">
               <strong>Front page</strong>
            </a>
         </li>
         <li class="next">
            <a accesskey="n" href="instrumention-modes-generated-advisor.html">
               <strong>Next</strong>14.2. Generated Advisor Weaving</a>
         </li>
      </ul>
   </body>
</html>